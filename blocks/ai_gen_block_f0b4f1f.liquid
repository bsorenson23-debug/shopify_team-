{% doc %}
  @prompt
    Create a product information tabs section with multiple customizable tabs. Each tab should display different product-specific content such as description, comparable engravable products, and product sizing information. The tabs should be easy to customize per product and have a clean, professional design that works well on both desktop and mobile devices.
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-product-tabs-{{ ai_gen_id }} {
    display: block;
    width: {{ block.settings.desktop_width_percent }}%;
    max-width: 100%;
    margin: 0 auto;
    background-color: {{ block.settings.background_color }};
    border-radius: {{ block.settings.border_radius }}px;
    padding: {{ block.settings.padding }}px;
  }

  .ai-product-tabs__header-{{ ai_gen_id }} {
    display: flex;
    flex-wrap: wrap;
    gap: {{ block.settings.tab_spacing }}px;
    border-bottom: {{ block.settings.border_width }}px solid {{ block.settings.border_color }};
    margin-bottom: {{ block.settings.content_spacing }}px;
  }

  .ai-product-tabs__tab-button-{{ ai_gen_id }} {
    background: none;
    border: none;
    padding: {{ block.settings.tab_padding }}px {{ block.settings.tab_padding | times: 1.5 }}px;
    font-size: {{ block.settings.tab_font_size }}px;
    color: {{ block.settings.tab_text_color }};
    cursor: pointer;
    position: relative;
    transition: color 0.3s ease;
    font-family: {{ block.settings.tab_font.family }}, {{ block.settings.tab_font.fallback_families }};
    font-weight: {{ block.settings.tab_font.weight }};
    text-transform: {% if block.settings.tab_uppercase %}uppercase{% else %}none{% endif %};
  }

  .ai-product-tabs__tab-button-{{ ai_gen_id }}:hover {
    color: {{ block.settings.tab_hover_color }};
  }

  .ai-product-tabs__tab-button-{{ ai_gen_id }}.active {
    color: {{ block.settings.tab_active_color }};
  }

  .ai-product-tabs__tab-button-{{ ai_gen_id }}.active::after {
    content: '';
    position: absolute;
    bottom: calc(-1 * {{ block.settings.border_width }}px);
    left: 0;
    right: 0;
    height: {{ block.settings.active_indicator_height }}px;
    background-color: {{ block.settings.tab_active_color }};
  }

  .ai-product-tabs__content-{{ ai_gen_id }} {
    position: relative;
  }

  .ai-product-tabs__panel-{{ ai_gen_id }} {
    display: none;
    color: {{ block.settings.content_text_color }};
    font-size: {{ block.settings.content_font_size }}px;
    line-height: {{ block.settings.content_line_height }};
  }

  .ai-product-tabs__panel-{{ ai_gen_id }}.active {
    display: block;
  }

  .ai-product-tabs__panel-{{ ai_gen_id }} h1,
  .ai-product-tabs__panel-{{ ai_gen_id }} h2,
  .ai-product-tabs__panel-{{ ai_gen_id }} h3,
  .ai-product-tabs__panel-{{ ai_gen_id }} h4,
  .ai-product-tabs__panel-{{ ai_gen_id }} h5,
  .ai-product-tabs__panel-{{ ai_gen_id }} h6 {
    margin-top: 0;
    margin-bottom: 12px;
    color: {{ block.settings.content_text_color }};
  }

  .ai-product-tabs__panel-{{ ai_gen_id }} p {
    margin-top: 0;
    margin-bottom: 12px;
  }

  .ai-product-tabs__panel-{{ ai_gen_id }} ul,
  .ai-product-tabs__panel-{{ ai_gen_id }} ol {
    margin-top: 0;
    margin-bottom: 12px;
    padding-left: 20px;
  }

  .ai-product-tabs__panel-{{ ai_gen_id }} li {
    margin-bottom: 8px;
  }

  .ai-product-tabs__panel-{{ ai_gen_id }} table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 12px;
  }

  .ai-product-tabs__panel-{{ ai_gen_id }} th,
  .ai-product-tabs__panel-{{ ai_gen_id }} td {
    padding: 10px;
    text-align: left;
    border: 1px solid {{ block.settings.border_color }};
  }

  .ai-product-tabs__panel-{{ ai_gen_id }} th {
    font-weight: 600;
    background-color: {{ block.settings.table_header_bg }};
  }

  .ai-product-tabs__empty-state-{{ ai_gen_id }} {
    padding: 40px 20px;
    text-align: center;
    color: #999;
    font-style: italic;
  }

  @media screen and (max-width: 749px) {
    .ai-product-tabs-{{ ai_gen_id }} {
      width: 100%;
      padding: {{ block.settings.padding | times: 0.7 }}px;
    }

    .ai-product-tabs__header-{{ ai_gen_id }} {
      gap: {{ block.settings.tab_spacing | times: 0.7 }}px;
      margin-bottom: {{ block.settings.content_spacing | times: 0.7 }}px;
    }

    .ai-product-tabs__tab-button-{{ ai_gen_id }} {
      padding: {{ block.settings.tab_padding | times: 0.7 }}px {{ block.settings.tab_padding }}px;
      font-size: {{ block.settings.tab_font_size | times: 0.9 }}px;
    }

    .ai-product-tabs__panel-{{ ai_gen_id }} {
      font-size: {{ block.settings.content_font_size | times: 0.9 }}px;
    }
  }
{% endstyle %}

<product-tabs-{{ ai_gen_id }} class="ai-product-tabs-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="ai-product-tabs__header-{{ ai_gen_id }}" role="tablist">
    {% if block.settings.tab_1_enabled and block.settings.tab_1_title != blank %}
      <button
        class="ai-product-tabs__tab-button-{{ ai_gen_id }} active"
        role="tab"
        aria-selected="true"
        aria-controls="ai-product-tabs__panel-1-{{ ai_gen_id }}"
        data-tab="1"
      >
        {{ block.settings.tab_1_title }}
      </button>
    {% endif %}

    {% if block.settings.tab_2_enabled and block.settings.tab_2_title != blank %}
      <button
        class="ai-product-tabs__tab-button-{{ ai_gen_id }}"
        role="tab"
        aria-selected="false"
        aria-controls="ai-product-tabs__panel-2-{{ ai_gen_id }}"
        data-tab="2"
      >
        {{ block.settings.tab_2_title }}
      </button>
    {% endif %}

    {% if block.settings.tab_3_enabled and block.settings.tab_3_title != blank %}
      <button
        class="ai-product-tabs__tab-button-{{ ai_gen_id }}"
        role="tab"
        aria-selected="false"
        aria-controls="ai-product-tabs__panel-3-{{ ai_gen_id }}"
        data-tab="3"
      >
        {{ block.settings.tab_3_title }}
      </button>
    {% endif %}

    {% if block.settings.tab_4_enabled and block.settings.tab_4_title != blank %}
      <button
        class="ai-product-tabs__tab-button-{{ ai_gen_id }}"
        role="tab"
        aria-selected="false"
        aria-controls="ai-product-tabs__panel-4-{{ ai_gen_id }}"
        data-tab="4"
      >
        {{ block.settings.tab_4_title }}
      </button>
    {% endif %}

    {% if block.settings.tab_5_enabled and block.settings.tab_5_title != blank %}
      <button
        class="ai-product-tabs__tab-button-{{ ai_gen_id }}"
        role="tab"
        aria-selected="false"
        aria-controls="ai-product-tabs__panel-5-{{ ai_gen_id }}"
        data-tab="5"
      >
        {{ block.settings.tab_5_title }}
      </button>
    {% endif %}
  </div>

  <div class="ai-product-tabs__content-{{ ai_gen_id }}">
    {% if block.settings.tab_1_enabled %}
      <div
        id="ai-product-tabs__panel-1-{{ ai_gen_id }}"
        class="ai-product-tabs__panel-{{ ai_gen_id }} active"
        role="tabpanel"
        aria-labelledby="ai-product-tabs__tab-1-{{ ai_gen_id }}"
      >
        {% if block.settings.tab_1_content != blank %}
          {{ block.settings.tab_1_content }}
        {% else %}
          <div class="ai-product-tabs__empty-state-{{ ai_gen_id }}">
            Add content for {{ block.settings.tab_1_title }}
          </div>
        {% endif %}
      </div>
    {% endif %}

    {% if block.settings.tab_2_enabled %}
      <div
        id="ai-product-tabs__panel-2-{{ ai_gen_id }}"
        class="ai-product-tabs__panel-{{ ai_gen_id }}"
        role="tabpanel"
        aria-labelledby="ai-product-tabs__tab-2-{{ ai_gen_id }}"
      >
        {% if block.settings.tab_2_content != blank %}
          {{ block.settings.tab_2_content }}
        {% else %}
          <div class="ai-product-tabs__empty-state-{{ ai_gen_id }}">
            Add content for {{ block.settings.tab_2_title }}
          </div>
        {% endif %}
      </div>
    {% endif %}

    {% if block.settings.tab_3_enabled %}
      <div
        id="ai-product-tabs__panel-3-{{ ai_gen_id }}"
        class="ai-product-tabs__panel-{{ ai_gen_id }}"
        role="tabpanel"
        aria-labelledby="ai-product-tabs__tab-3-{{ ai_gen_id }}"
      >
        {% if block.settings.tab_3_content != blank %}
          {{ block.settings.tab_3_content }}
        {% else %}
          <div class="ai-product-tabs__empty-state-{{ ai_gen_id }}">
            Add content for {{ block.settings.tab_3_title }}
          </div>
        {% endif %}
      </div>
    {% endif %}

    {% if block.settings.tab_4_enabled %}
      <div
        id="ai-product-tabs__panel-4-{{ ai_gen_id }}"
        class="ai-product-tabs__panel-{{ ai_gen_id }}"
        role="tabpanel"
        aria-labelledby="ai-product-tabs__tab-4-{{ ai_gen_id }}"
      >
        {% if block.settings.tab_4_content != blank %}
          {{ block.settings.tab_4_content }}
        {% else %}
          <div class="ai-product-tabs__empty-state-{{ ai_gen_id }}">
            Add content for {{ block.settings.tab_4_title }}
          </div>
        {% endif %}
      </div>
    {% endif %}

    {% if block.settings.tab_5_enabled %}
      <div
        id="ai-product-tabs__panel-5-{{ ai_gen_id }}"
        class="ai-product-tabs__panel-{{ ai_gen_id }}"
        role="tabpanel"
        aria-labelledby="ai-product-tabs__tab-5-{{ ai_gen_id }}"
      >
        {% if block.settings.tab_5_content != blank %}
          {{ block.settings.tab_5_content }}
        {% else %}
          <div class="ai-product-tabs__empty-state-{{ ai_gen_id }}">
            Add content for {{ block.settings.tab_5_title }}
          </div>
        {% endif %}
      </div>
    {% endif %}
  </div>
</product-tabs-{{ ai_gen_id }}>

<script>
  (function() {
    class ProductTabs{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
      }

      connectedCallback() {
        this.tabButtons = this.querySelectorAll('.ai-product-tabs__tab-button-{{ ai_gen_id }}');
        this.tabPanels = this.querySelectorAll('.ai-product-tabs__panel-{{ ai_gen_id }}');
        this.setupEventListeners();
      }

      setupEventListeners() {
        this.tabButtons.forEach((button) => {
          button.addEventListener('click', () => {
            const tabId = button.getAttribute('data-tab');
            this.switchTab(tabId);
          });

          button.addEventListener('keydown', (e) => {
            this.handleKeyboardNavigation(e);
          });
        });
      }

      switchTab(tabId) {
        this.tabButtons.forEach((btn) => {
          btn.classList.remove('active');
          btn.setAttribute('aria-selected', 'false');
        });

        this.tabPanels.forEach((panel) => {
          panel.classList.remove('active');
        });

        const activeButton = this.querySelector(`[data-tab="${tabId}"]`);
        const activePanel = this.querySelector(`#ai-product-tabs__panel-${tabId}-{{ ai_gen_id }}`);

        if (activeButton && activePanel) {
          activeButton.classList.add('active');
          activeButton.setAttribute('aria-selected', 'true');
          activePanel.classList.add('active');
        }
      }

      handleKeyboardNavigation(e) {
        const currentIndex = Array.from(this.tabButtons).indexOf(e.target);
        let newIndex;

        if (e.key === 'ArrowRight') {
          e.preventDefault();
          newIndex = currentIndex + 1 >= this.tabButtons.length ? 0 : currentIndex + 1;
        } else if (e.key === 'ArrowLeft') {
          e.preventDefault();
          newIndex = currentIndex - 1 < 0 ? this.tabButtons.length - 1 : currentIndex - 1;
        } else if (e.key === 'Home') {
          e.preventDefault();
          newIndex = 0;
        } else if (e.key === 'End') {
          e.preventDefault();
          newIndex = this.tabButtons.length - 1;
        }

        if (newIndex !== undefined) {
          this.tabButtons[newIndex].focus();
          const tabId = this.tabButtons[newIndex].getAttribute('data-tab');
          this.switchTab(tabId);
        }
      }
    }

    customElements.define('product-tabs-{{ ai_gen_id }}', ProductTabs{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "Product information tabs",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Tab 1"
    },
    {
      "type": "checkbox",
      "id": "tab_1_enabled",
      "label": "Enable tab 1",
      "default": true
    },
    {
      "type": "text",
      "id": "tab_1_title",
      "label": "Tab title",
      "default": "Description"
    },
    {
      "type": "richtext",
      "id": "tab_1_content",
      "label": "Tab content",
      "default": "<p>Add your product description here. Include details about materials, features, and benefits.</p>"
    },
    {
      "type": "header",
      "content": "Tab 2"
    },
    {
      "type": "checkbox",
      "id": "tab_2_enabled",
      "label": "Enable tab 2",
      "default": true
    },
    {
      "type": "text",
      "id": "tab_2_title",
      "label": "Tab title",
      "default": "Comparable products"
    },
    {
      "type": "richtext",
      "id": "tab_2_content",
      "label": "Tab content",
      "default": "<p>List comparable engravable products or alternatives here.</p>"
    },
    {
      "type": "header",
      "content": "Tab 3"
    },
    {
      "type": "checkbox",
      "id": "tab_3_enabled",
      "label": "Enable tab 3",
      "default": true
    },
    {
      "type": "text",
      "id": "tab_3_title",
      "label": "Tab title",
      "default": "Sizing information"
    },
    {
      "type": "richtext",
      "id": "tab_3_content",
      "label": "Tab content",
      "default": "<p>Add sizing charts, measurements, or fit information here.</p>"
    },
    {
      "type": "header",
      "content": "Tab 4"
    },
    {
      "type": "checkbox",
      "id": "tab_4_enabled",
      "label": "Enable tab 4",
      "default": false
    },
    {
      "type": "text",
      "id": "tab_4_title",
      "label": "Tab title",
      "default": "Shipping & returns"
    },
    {
      "type": "richtext",
      "id": "tab_4_content",
      "label": "Tab content"
    },
    {
      "type": "header",
      "content": "Tab 5"
    },
    {
      "type": "checkbox",
      "id": "tab_5_enabled",
      "label": "Enable tab 5",
      "default": false
    },
    {
      "type": "text",
      "id": "tab_5_title",
      "label": "Tab title",
      "default": "Care instructions"
    },
    {
      "type": "richtext",
      "id": "tab_5_content",
      "label": "Tab content"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "desktop_width_percent",
      "label": "Desktop width",
      "min": 50,
      "max": 100,
      "step": 5,
      "unit": "%",
      "default": 100
    },
    {
      "type": "range",
      "id": "padding",
      "label": "Padding",
      "min": 0,
      "max": 60,
      "step": 5,
      "unit": "px",
      "default": 30
    },
    {
      "type": "range",
      "id": "border_radius",
      "label": "Border radius",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "default": 8
    },
    {
      "type": "range",
      "id": "tab_spacing",
      "label": "Tab spacing",
      "min": 5,
      "max": 40,
      "step": 5,
      "unit": "px",
      "default": 15
    },
    {
      "type": "range",
      "id": "content_spacing",
      "label": "Content spacing",
      "min": 10,
      "max": 50,
      "step": 5,
      "unit": "px",
      "default": 25
    },
    {
      "type": "header",
      "content": "Tab style"
    },
    {
      "type": "font_picker",
      "id": "tab_font",
      "label": "Tab font",
      "default": "inter_n4"
    },
    {
      "type": "range",
      "id": "tab_font_size",
      "label": "Tab font size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "default": 16
    },
    {
      "type": "range",
      "id": "tab_padding",
      "label": "Tab padding",
      "min": 5,
      "max": 25,
      "step": 5,
      "unit": "px",
      "default": 15
    },
    {
      "type": "checkbox",
      "id": "tab_uppercase",
      "label": "Uppercase tabs",
      "default": false
    },
    {
      "type": "range",
      "id": "active_indicator_height",
      "label": "Active indicator height",
      "min": 1,
      "max": 5,
      "step": 1,
      "unit": "px",
      "default": 2
    },
    {
      "type": "header",
      "content": "Content style"
    },
    {
      "type": "range",
      "id": "content_font_size",
      "label": "Content font size",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "default": 15
    },
    {
      "type": "range",
      "id": "content_line_height",
      "label": "Content line height",
      "min": 1,
      "max": 2,
      "step": 0.1,
      "default": 1.6
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "tab_text_color",
      "label": "Tab text",
      "default": "#666666"
    },
    {
      "type": "color",
      "id": "tab_hover_color",
      "label": "Tab hover",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "tab_active_color",
      "label": "Tab active",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "content_text_color",
      "label": "Content text",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border",
      "default": "#e0e0e0"
    },
    {
      "type": "range",
      "id": "border_width",
      "label": "Border width",
      "min": 1,
      "max": 5,
      "step": 1,
      "unit": "px",
      "default": 1
    },
    {
      "type": "color",
      "id": "table_header_bg",
      "label": "Table header background",
      "default": "#f5f5f5"
    }
  ],
  "presets": [
    {
      "name": "Product information tabs"
    }
  ]
}
{% endschema %}
